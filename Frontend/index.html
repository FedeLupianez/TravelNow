<!DOCTYPE html>
<html lang="es">

<head>
   <meta charset="UTF-8">
   <title>TravelNow</title>
   <link rel="icon" type="image/x-icon" href="img/logo.png" />
   <link rel="stylesheet" href="global.css">
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link
      href="https://fonts.googleapis.com/css2?family=Lexend+Exa:wght@100..900&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Zalando+Sans+Expanded:ital,wght@0,200..900;1,200..900&display=swap"
      rel="stylesheet">

   <link rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_name=favorite,keyboard_arrow_down" />
</head>

<body>
   <header-nav></header-nav>
   <img src="img/background.jpg" id="landing-image" />
   <audio id="audio" autoplay>
      <source src="assets/background_music.mp3" type="audio/mpeg">
   </audio>

   <main>
      <span class="title">
         Nuestros Destinos
      </span>

      <section class="cards-container">
      </section>

      <section class="spot-container">
         <button id="open-modal">Ver Video</button>
         <div class="modal" id="modal">
            <div class="modal-content">
               <button class="close" id="close-modal">&times;</button>
               <iframe width="560" id="video" height="315" src="" title="YouTube video player" frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
            </div>
         </div>
      </section>
   </main>
   <footer-component></footer-component>

   <script src="components/like_button.js"></script>
   <script src="components/card.js"></script>
   <script src="components/header.js"></script>
   <script src="components/footer.js"></script>
   <script src="components/spot_modal.js"></script>
   <script src="scripts/music_control.js"></script>
   <script src="app.js"></script>
</body>

</html>
<script>
   async function load_cards_data() {
      try {
         console.log("cargando datos");

         // const response = await fetch("./cards.json");
         // const data = await response.json();

         const response = await fetch("http://localhost:8000/dest/get_all");
         const data = await response.json();
         const cards_container = document.querySelector(".cards-container");
         for (let i = 0; i < data.cards.length; i++) {
            const card_data = data.cards[i];
            const card = document.createElement("card-item");
            card.setAttribute("title", card_data.title)
            card.setAttribute("country", card_data.country)
            card.setAttribute("rank", card_data.rank)
            card.setAttribute("price", card_data.price)
            card.setAttribute("image", card_data.image)
            cards_container.appendChild(card)
         }
         console.log("cards cargadas")
      } catch (error) {
         console.log(error);
      }
   }

   document.addEventListener("DOMContentLoaded", load_cards_data)
</script>
